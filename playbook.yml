---

- name: config
  gather_facts: false
  hosts:
    - pi
    - localhost
  tags:
    - always
  tasks:
    - name: load config
      community.sops.load_vars:
        file: config.yml

- name: external
  import_playbook: plays/external.yml

- name: setup
  import_playbook: plays/setup.yml

- name: datadog
  import_playbook: plays/datadog.yml

- name: light
  import_playbook: plays/light.yml

- name: vpn
  import_playbook: plays/vpn.yml

- name: docker secrets
  import_playbook: plays/docker_secrets.yml

- name: traefik
  import_playbook: plays/traefik.yml

#- name: portainer
  #import_playbook: plays/portainer.yml

- name: registry
  import_playbook: plays/registry.yml

- name: homepage
  import_playbook: plays/homepage.yml

- name: sync
  import_playbook: plays/sync.yml

- name: cloudflare
  import_playbook: plays/cloudflare.yml

- name: temporalite
  import_playbook: plays/temporalite.yml

- name: temporal web
  import_playbook: plays/temporal_web.yml
